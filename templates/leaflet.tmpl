{{block "leaflet" .}}
	<div class="h-full flex flex-col">
		<h1 class="text-xl font-bold">Leaflet</h1>

		<div class="flex-1 flex flex-row space-x-4 p-4">
			<div id="map"
					 class="flex-1"
					 _="
						on load
							call createMap(me.id) then set :map to it

						on selected(url) from body
							fetch `${url}` as json then put it into data
							call addMarker(:map, data, :marker) then set :marker to it
					">
			</div>

			<fieldset class="flex flex-col w-2/10">
				<ul>
					{{range .Locations}}
						<li>
							<label>
								<input type="radio"
											 name="name"
											 hx-get="/leaflet/location/{{.Name}}"
											 hx-target="#location-info"
											 hx-swap="innerHTML"
											 hx-disabled-elt="fieldset"
											 hx-indicator="#loading-indicator, next .htmx-indicator"
											 hx-params="none"
											 /> {{.Name}}
							</label>
						</li>
					{{end}}
				</ul>
				<div class="htmx-indicator loading loading-spinner"></div>
				<div id="location-info"></div>
			</fieldset>
		</div>
	</div>
{{end}}

{{block "leaflet-location-info" .}}
	<table class="table w-1/2">
		<tr><th>Name</th><td>{{.Name}}</td></tr>
		<tr><th>Latitude</th><td>{{.Lat}}</td></tr>
		<tr><th>Longitude</th><td>{{.Lng}}</td></tr>
	</table>
{{end}}
