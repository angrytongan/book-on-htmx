{{block "head" .}}
<!doctype html>
<html {{if .DataTheme}}data-theme="{{.DataTheme}}"{{end}}>
  <head>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link rel="stylesheet" href="/css/style.css" />

    <!-- htmx -->
    <script type="text/javascript" src="/js/htm@2.0.6.min.js"></script>
    <script type="text/javascript" src="/js/hyperscript@0.9.14.min.js"></script>
    <script type="text/javascript" src="/js/htmx-ext-reponse-targets@2.0.2.min.js"></script>
    <meta name="htmx-config" content='{"historyCacheSize": 0,"refreshOnHistoryMiss": true}'>
  </head>

  <body hx-history="false"
        hx-ext="response-targets">

    {{template "layout-head" .}}
{{end}}

{{block "foot" .}}
    {{template "layout-foot" .}}
  </body>
</html>
{{end}}

{{block "layout-head" .}}
  <div class="flex flex-row gap-2 m-2">
    <nav>
      <ul class="menu bg-base-200 rounded-box w-56">
        {{block "nav" .}}
          {{range .Nav}}
            <li><a href="{{.Href}}"
                   class="{{if .Active}}menu-active{{end}}"
                   hx-get="/nav{{.Href}}"
                   hx-trigger="click"
                   hx-target="closest ul"
                   hx-swap="innerHTML"
                >{{.Label}}</a></li>
          {{end}}
        {{end}}
      </ul>
    </nav>

    <main id="main" class="grow">
{{end}}

{{block "layout-foot" .}}
    </main>
  </div>
{{end}}

{{block "nav-main" .}}
  {{template "nav" .}}

  <div id="main" class="m-4 grow" hx-swap-oob="true">
    <div hx-get="{{.Href}}"
         hx-trigger="load delay:100ms"
         hx-target="this"
         hx-swap="outerHTML"
         >{{template "main-loading"}}</div>
  </div>
{{end}}

{{define "main-loading"}}
  <div class="flex flex-col gap-4">
    <div class="skeleton h-8 w-full"></div>
  </div>
{{end}}
